<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic Meta Tags -->
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Patrick Kyei" property="og:site_name" />

    <!-- Extra -->
    <meta property="article:author" content="{{ site.url }}/about/" />


    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


    <!-- Page Title -->
    <title>{% if page.title %}{{ page.title }} | {{ site.heading }}{% else %}{{ site.heading }}{% endif %}</title>

    <!-- Canonical Link -->
    <link rel="canonical" href="{{ site.url }}{{ page.url }}" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ site.baseurl }}/manifest.json" />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Patrick Kyei" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="{{ site.baseurl }}/assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" href="{{ site.baseurl }}/assets/img/favicons/favicon-16x16.png" type="image/png" sizes="16x16" />

    <!-- Stylesheets -->
    <link href="{{ site.baseurl }}/assets/css/style.css" rel="stylesheet" media="all" />
    <link href="{{ site.baseurl }}/assets/css/main.css" rel="stylesheet" media="all" />
    <link href="{{ site.baseurl }}/assets/css/Util.css" rel="stylesheet" media="all" />
    <link href="{{ site.baseurl }}/assets/css/vendor/Katex.css" rel="stylesheet" media="all" />

    {% include meta.html %}

    <!-- IE-specific Stylesheet -->
    <!--[if IE]>
        <link href="/assets/css/ie-target.css" rel="stylesheet" type="text/css"/>
    <![endif]-->

    <!-- Analytics -->
    <script data-host="https://microanalytics.io" data-dnt="false" src="https://microanalytics.io/js/script.js"
        id="ZwSg9rf6GA" async defer></script>

    <!-- RSS Feed -->
    <link rel="alternate" type="application/rss+xml" href="{{ site.url }}/feed.xml">
</head>


<body>
    <main>
        {%- include Nav.html -%}
        <section class="section">
            <div class="columns is-centered">

                <!-- Homepage Layout-->
                {%- if page.permalink == "/" -%}
                <div class="column is-8-widescreen  is-8-desktop is-8-tablet is-12-mobile">
                    {%- if site.preferences.homepage.enabled -%}
                    <!--- Show Homepage -->
                    {%- include Homepage.html -%}
                    {%- else -%}
                    <!--- Show Feed Part -->
                    <div class="column is-6-widescreen  is-8-desktop is-8-tablet is-12-mobile">
                        <h5 class="meta-title"><a href="/">← Home</a></h5>
                        <div class="jumbo">{{page.title}}</div>

                        {%- include Content.html -%}
                        {%- include Feed.html -%}
                    </div>
                    {%- endif -%}
                </div>
                {%- endif -%}

                <!--- Notes Feed Layout-->
                {%- if page.feedformat -%}
                <div class="column is-6-widescreen  is-8-desktop is-8-tablet is-12-mobile">
                    <h5 class="meta-title"><a href="/">← Home</a></h5>
                    <div class="jumbo">{{page.title}}</div>
                    {%- include Content.html -%}
                    {%- include Feed.html -%}
                    {%- endif -%}

                    <!--- Notes Layout-->
                    {%- if page.content-type == "notes" -%}
                    <div class="column is-5-widescreen  is-6-desktop is-8-tablet is-12-mobile">
                        <div class="note-page-section">
                            <div>
                                {%- if site.preferences.homepage.enabled -%}
                                <a onclick="window.history.back();">
                                    {%- else -%}
                                    <a onclick="window.location.assign('/');">
                                        {%- endif -%}
                                        <h5 class="meta-title">← BACK</h5>
                                    </a>
                            </div>
                            <!--- List type Note Layout-->
                            {%- if page.format == "list" -%}
                            <style>
                                li {
                                    border-bottom: 1px solid var(--color-border-light);
                                    list-style: none;
                                    padding: 0.4rem 0 0.4rem 0;
                                }

                                .content ul {
                                    padding-left: 0px;
                                }

                                h3 {
                                    padding-top: 1rem;
                                    padding-bottom: 0rem;
                                }
                            </style>
                            {%- endif -%}
                            <h1>{{page.title}}</h1>
                            {%- include Content.html -%}
                            {%- include Backlinks.html -%}
                        </div>
                    </div>
                    {%- endif -%}


                    <!--- Post Feed Layout-->
                    {%- if page.permalink == "/posts" -%}
                    <div class="column is-6-widescreen  is-8-desktop is-8-tablet is-12-mobile">
                        <h5 class="meta-title"><a href="/">← Home</a></h5>
                        <div class="jumbo">{{page.title}}</div>
                        {%- include Content.html -%}
                        {% for post in site.posts %}
                        <div class="list-feed">
                            <a href="{{ site.baseurl }}{{post.url}}"
                                style="text-decoration: none;display: flex;justify-content: space-between;flex-direction: row;width: 100%;">
                                <div class="writinglist-title">{{post.title }}</div>
                            </a>
                        </div>
                        {%- endfor -%}
                    </div>

                    <ul>

                        {%- endif -%}

                        <!--- Post Layout-->
                        {%- if page.content-type == "post" -%}
                        <div class="column is-5-widescreen  is-6-desktop is-8-tablet is-12-mobile">
                            <div class="note-page-section">
                                <div>
                                    {%- if site.preferences.homepage.enabled -%}
                                    <a onclick="window.history.back();">
                                        {%- else -%}
                                        <a onclick="window.location.assign('/');">
                                            {%- endif -%}
                                            <h5 class="meta-title">← BACK</h5>
                                        </a>
                                </div>

                                <section class="subscription-cta"
                                    style="margin-bottom: 2rem; padding: 1rem; border: 1px solid #ccc; border-radius: 5px;">
                                    <h2 style="margin-top: 0;">Not A Subscriber?</h2>
                                    <p>Join <strong>4,500+</strong> readers changing their life with deep dives about
                                        business, effortless productivity and human potential.</p>

                                    {% include Subscribe.html %}

                                </section>
                                <p class="post-meta"
                                    style="margin-top: 1.5rem; margin-bottom: 0.5rem; color: #ffffff; font-size: 1.2rem;">
                                    {{ page.date | date: "%B %-d, %Y" }} | Patrick Kyei
                                </p>

                                <h1 class="title is-1 has-text-weight-extrabold">{{page.title}}</h1>
                                {%- include Content.html -%}
                                {%- include Backlinks.html -%}

                                <!-- post navigation (moved inside article column) -->
                                <nav class="post-navigation in-article">
                                    <div class="previous-post">
                                        {% if page.previous %}
                                        <a href="{{ page.previous.url }}" rel="prev">← Previous: {{ page.previous.title
                                            | truncate: 30
                                            }}</a>
                                        {% endif %}
                                    </div>
                                    <div class="next-post">
                                        {% if page.next %}
                                        <a href="{{ page.next.url }}" rel="next">Next: {{ page.next.title | truncate: 30
                                            }} →</a>
                                        {% endif %}
                                    </div>
                                </nav>
                                {% include Subscribe.html %}
                            </div>
                        </div>
                        {%- endif -%}

                        <!--- Static Page Layout-->
                        {%- if page.content-type == "static" -%}
                        <div class="column is-5-widescreen  is-6-desktop is-8-tablet is-12-mobile">
                            <div class="jumbo">{{page.title}}</div>
                            {%- include Content.html -%}
                        </div>
                        {%- endif -%}

                </div>

                {% include Share.html %}

                <!--post navigation (removed here; it is now inside the article column) -->

        </section>
        {%- include Footer.html -%}
    </main>

    <!-- PWA Install Prompt -->
    <div id="pwa-install-prompt"
        style="display: none; position: fixed; bottom: 20px; right: 20px; background: #000; color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 9999; max-width: 300px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">
        <div style="margin-bottom: 15px;">
            <strong style="display: block; margin-bottom: 8px;">Install Patrick Kyei</strong>
            <p style="margin: 0; font-size: 14px; opacity: 0.9;">Get faster access to posts and notes on your device</p>
        </div>
        <div style="display: flex; gap: 10px;">
            <button id="pwa-install-btn"
                style="flex: 1; padding: 10px; background: #fff; color: #000; border: none; border-radius: 4px; font-weight: 600; cursor: pointer;">Install</button>
            <button id="pwa-dismiss-btn"
                style="flex: 1; padding: 10px; background: rgba(255,255,255,0.2); color: #fff; border: none; border-radius: 4px; cursor: pointer;">Later</button>
        </div>
    </div>

    <script>
        // PWA Install Prompt Handler
        let deferredPrompt;
        const installPrompt = document.getElementById('pwa-install-prompt');
        const installBtn = document.getElementById('pwa-install-btn');
        const dismissBtn = document.getElementById('pwa-dismiss-btn');

        // Check if PWA was already installed or dismissed
        const pwaDismissed = localStorage.getItem('pwa-dismissed');
        const pwaPlatform = /iPad|iPhone|iPod/.test(navigator.userAgent) ? 'ios' : 'other';

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            deferredPrompt = e;

            // Don't show on iOS since PWA installation is different
            if (pwaPlatform === 'ios') return;

            // Show install prompt if not dismissed
            if (!pwaDismissed) {
                setTimeout(() => {
                    installPrompt.style.display = 'block';
                }, 2000);
            }
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('PWA installed');
                }
                deferredPrompt = null;
                installPrompt.style.display = 'none';
            }
        });

        dismissBtn.addEventListener('click', () => {
            localStorage.setItem('pwa-dismissed', 'true');
            installPrompt.style.display = 'none';
        });

        // Hide if app is already installed
        window.addEventListener('appinstalled', () => {
            deferredPrompt = null;
            installPrompt.style.display = 'none';
        });
    </script>

    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker
                .register("{{ site.baseurl }}/service-worker.js")
                .then((reg) => console.log("SW registered:", reg.scope))
                .catch((err) => console.error("SW registration failed:", err));
        }
    </script>
</body>